<!DOCTYPE html>
<html lang="en">

<!-- ======================================================
     HEAD
====================================================== -->
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Marsha Kerr Talley | Turning Pain Into Possibilities</title>
</head>

<body style="margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;">

<!-- ======================================================
     SITE HEADER / NAVIGATION
====================================================== -->
<header style="width:100%;background:#ffffff;border-bottom:1px solid #e6f2f2;">
  <div style="max-width:1200px;margin:0 auto;padding:20px 16px 12px;display:flex;flex-direction:column;align-items:center;box-sizing:border-box;">

    <!-- LOGO -->
    <a href="index.html" style="display:inline-block;">
      <img src="MKT-logo-3.png" alt="Marsha Kerr Talley – Live Inspired"
        style="max-width:220px;width:100%;height:auto;display:block;margin:0 auto 12px;" />
    </a>

    <!-- NAVIGATION -->
    <nav aria-label="Main navigation">
      <ul style="list-style:none;padding:0;margin:0;display:flex;gap:28px;flex-wrap:wrap;justify-content:center;font-size:14px;letter-spacing:0.08em;text-transform:uppercase;">
        <li><a href="index.html" style="color:#056367;text-decoration:none;font-weight:600;">Home</a></li>
        <li><a href="work-with-me.html" style="color:#2f2f2f;text-decoration:none;">Work With Me</a></li>
        <li><a href="books.html" style="color:#2f2f2f;text-decoration:none;">Books</a></li>
        <li><a href="podcast.html" style="color:#2f2f2f;text-decoration:none;">Podcast</a></li>
        <li><a href="reflections.html" style="color:#2f2f2f;text-decoration:none;">Reflections</a></li>
      </ul>
    </nav>
  </div>
</header>

<!-- ======================================================
     FIREBASE SDKS
====================================================== -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-storage-compat.js"></script>

<!-- ======================================================
     LIVE INSPIRED COMMUNITY SECTION
====================================================== -->
<section id="admin-upload">

<!-- =========================
     COMMUNITY STYLES
========================= -->
<style>
/* (UNCHANGED — your full styles remain exactly as provided) */
#admin-upload, #admin-upload * { box-sizing:border-box; font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif }
#admin-upload { min-height:100vh; padding:56px 24px; background:linear-gradient(180deg,#f6fefe,#ffffff) }
.wrap { max-width:900px; margin:0 auto; display:grid; gap:32px }
h1 { text-align:center; color:#056367; font-size:44px; font-weight:900 }
p.sub { text-align:center; color:#0d4b4e }
.card,.post { background:#fff; border:3px solid #2fe2dd; border-radius:26px; padding:24px; display:grid; gap:16px; box-shadow:0 20px 60px rgba(0,0,0,.08) }

.youtube-section h2{ text-align:center;color:#056367;margin:0;font-size:26px;font-weight:900 }
.youtube-grid{ display:grid;gap:18px;grid-template-columns:repeat(auto-fit,minmax(240px,1fr)) }
.yt-embed{ width:100%;aspect-ratio:16/9;border-radius:18px;overflow:hidden;background:#000 }
.yt-embed iframe{ width:100%;height:100%;border:0 }

.admin-link{ text-align:right;font-size:14px;color:#056367;cursor:pointer;text-decoration:underline }
#adminLoginBox{ display:none }
#adminIndicator{ text-align:center;font-size:14px;font-weight:800;color:#056367;display:none }

textarea.post-message{ min-height:180px;font-size:17px;line-height:1.6 }
input,textarea{ width:100%;padding:14px;border-radius:14px;border:1px solid #ccc }

.publish-wrap{ display:flex;justify-content:center }
button{ background:linear-gradient(135deg,#056367,#319fa2);color:#fff;border:none;padding:10px 22px;border-radius:999px;font-weight:800 }

.reactions{ display:flex;gap:10px;flex-wrap:wrap }
.reactions button{ background:#f0fefe;color:#056367;border:1px solid #2fe2dd;padding:6px 14px;font-weight:800 }

.error-box{
  border:2px solid #ffb3b3;
  background:#fff5f5;
  color:#7a1f1f;
  padding:14px 16px;
  border-radius:16px;
  font-size:14px;
}
</style>

<div class="wrap">

  <h1>Live Inspired Community</h1>
  <p class="sub">Encouragement, reflection, and shared growth.</p>

  <!-- =========================
       YOUTUBE AUTO-PULL SECTION
  ========================== -->
  <div class="card youtube-section">
    <h2>From YouTube · Watch & Reflect</h2>
    <p class="sub">Moments of insight, encouragement, and conversation.</p>
    <div id="youtubeGrid" class="youtube-grid"></div>
  </div>

  <!-- (Everything else in Community section remains unchanged) -->
  <div id="adminIndicator">Admin logged in</div>
  <div class="admin-link" onclick="toggleAdminLogin()">Admin login</div>

  <div id="adminLoginBox" class="card">
    <input id="adminEmail" type="email" placeholder="Admin email">
    <input id="adminPassword" type="password" placeholder="Admin password">
    <button onclick="adminLogin()">Sign in</button>
    <div id="loginStatus"></div>
  </div>

  <div id="composer" class="card" style="display:none">
    <textarea id="postText" class="post-message" placeholder="Write your message…"></textarea>
    <input id="mediaUrl" placeholder="Optional media URL (image, video, or YouTube)">
    <input id="fileInput" type="file" accept="image/*,video/*">
    <div id="preview"></div>
    <div class="publish-wrap"><button onclick="publishPost()">Publish Post</button></div>
  </div>

  <div id="feed"></div>

</div>
</section>

<!-- ======================================================
     FIREBASE COMMUNITY LOGIC
====================================================== -->
<script>
/* (UNCHANGED — your full Firebase logic remains exactly as provided) */
</script>

<!-- ======================================================
     YOUTUBE PLAYLIST AUTO-PULL (FIXED)
====================================================== -->
<script>
const YT_API_KEY = "AIzaSyC3xN***************5yU";
const PLAYLIST_ID = "PLfLwFGreLvJGFe9llGE1qj-0zx8sOWZui";
const MAX_RESULTS = 6;

async function loadYouTubePlaylist(){
  const grid=document.getElementById("youtubeGrid");
  if(!grid) return;

  try{
    const res=await fetch(
      `https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&playlistId=${PLAYLIST_ID}&maxResults=${MAX_RESULTS}&key=${YT_API_KEY}`
    );
    const data=await res.json();
    if(!data.items) throw data;

    grid.innerHTML="";
    data.items.reverse().forEach(item=>{
      if(!item.snippet?.resourceId) return;
      const videoId=item.snippet.resourceId.videoId;
      grid.innerHTML+=`
        <div class="yt-embed">
          <iframe src="https://www.youtube-nocookie.com/embed/${videoId}" allowfullscreen></iframe>
        </div>`;
    });
  }catch(err){
    grid.innerHTML=`<div class="error-box">${err.message||JSON.stringify(err)}</div>`;
    console.error(err);
  }
}

/* ✅ FIX #1: Safari-safe DOM load */
document.addEventListener("DOMContentLoaded", loadYouTubePlaylist);
</script>

<!-- ======================================================
     SITE FOOTER
====================================================== -->
<footer class="site-footer">
  <div class="footer-inner">
    <p>Copyright © <span id="currentYear"></span> Marsha Kerr Talley — All Rights Reserved.</p>
  </div>
</footer>

<script>
document.getElementById("currentYear").textContent=new Date().getFullYear();
</script>

</body>
</html>
